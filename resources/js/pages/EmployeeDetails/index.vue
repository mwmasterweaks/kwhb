<script setup>
import { useEmployeeStore } from "@/store/employeeStore"
import { computed, watch } from 'vue'
import { useRouter } from 'vue-router'

import EmployeeInfo from '@/pages/EmployeeDetails/EmployeeInfo/index.vue'
import LeaveInfo from '@/pages/EmployeeDetails/Leave/index.vue'
import PayInfo from '@/pages/EmployeeDetails/Pay/index.vue'
import UserProfileHeader from '@/pages/EmployeeDetails/UserProfileHeader.vue'


const router = useRouter()
const employeeStore = useEmployeeStore()

const activeTab = computed({
  get: () => employeeStore.data.routeTab,
  set: value => { employeeStore.setActiveTab(value) },
})

watch(activeTab, (newValue, oldValue) => {
  console.log('activeTab changed from', oldValue, 'to', newValue)
})

const tabs = [
  {
    title: 'Employee Info',
    icon: 'tabler-user-check',
    tab: 'EmployeeInfo',
  },
  {
    title: 'Pay',
    icon: 'customPay', 
    tab: 'Pay',
  },
  {
    title: 'Leave',
    icon: 'customLeave',
    tab: 'Leave',
  },
]

// if(!profileTabData.value)
// {
//   console.log("No employee selected");
//   router.push("employee")
// }
</script>

<template>
  <div>
    <UserProfileHeader class="mb-5" />
    <VTabs
      v-model="activeTab"
      class="v-tabs"
      color="#051c73"
    >
      <VTab
        v-for="item in tabs"
        :key="item.icon"
        :value="item.tab"
        class="font-weight-bold text-none"
      >
        <template v-if="item.icon === 'customPay'">
          <span class="custom-icon mr-2 ml-n1">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              xmlns:v="https://vecta.io/nano"
            ><path
              d="M13.165 1.688c.85.512 1.555 1.127 2.248 1.835l.353.354c.491.534.737.87.816 1.6l-.069.468c-.372.179-.372.179-.881.22a7.79 7.79 0 0 1-1.472-1.651c-.987-1.067-2.085-1.575-3.527-1.751-1.898-.053-3.268.064-4.672 1.377-1.57 1.674-1.891 2.989-1.843 5.259.082.916.283 1.471.726 2.271l.206.619c.29.596.513.674 1.115.922l.363.312c.693.466 1.424.636 2.224.83l.465.118 1.131.281a4.12 4.12 0 0 1 .22.881c-.515.515-.633.511-1.335.523-1.874-.048-3.474-1.045-4.83-2.284-1.566-1.676-2.195-3.668-2.202-5.945.156-1.984 1.166-3.702 2.615-5.037C7.174.971 10.349.365 13.165 1.688z"
              fill="#8e919f"
            /><path
              d="M17.615 8.271c1.14.612 2.011 1.505 2.422 2.739.161 1.507.036 2.521-.881 3.743-.495.317-.495.317-.881.44v.44c-1.062.566-2.131.557-3.303.44-1.216-.397-1.9-1.199-2.642-2.202-.521-1.042-.399-2.524-.052-3.61 1.052-1.937 3.31-2.87 5.336-1.991zm-3.743 2.518c-.279.874-.326 1.773 0 2.642h.44l.22.661c.567.436.902.44 1.624.427 1-.259 1.453-.512 2.119-1.307.177-.768.173-1.433 0-2.202-.482-.622-.843-.972-1.541-1.321-1.339-.154-1.971.082-2.862 1.101z"
              fill="#8a8e9d"
            /><path
              d="M15.936 16.885l.75-.011c1.509-.001 2.615.047 3.761 1.126l.319.398.328.4c.607.821.509 1.606.498 2.586l-.003.503-.011 1.231c-.399.151-.399.151-.881.22-.377-.227-.377-.227-.661-.661-.105-.667-.105-.667-.138-1.431-.049-1.064-.049-1.064-.303-2.092-1.038-.703-2.306-.522-3.509-.523l-.724-.016c-1.38-.012-1.38-.012-2.635.503-.784.938-.688 2.011-.755 3.181-.083.598-.083.598-.524 1.038-.779-.118-.779-.118-1.101-.44-.14-1.705-.163-3.189.968-4.554 1.41-1.489 2.63-1.465 4.62-1.46z"
              fill="#8a8d9c"
            /><path
              d="M9.468 5.284c1.267.755 1.267.755 1.528 1.362l.014.399c-.22.22-.22.22-.784.234l-.537-.014c.317.543.611 1.045 1.032 1.514.446.723.435 1.18.289 2.009-.463.461-.972.786-1.541 1.101-1.051-.728-1.051-.728-1.294-1.472l-.028-.509c.22-.22.22-.22.784-.234l.537.014c-.318-.544-.617-1.051-1.032-1.528-.414-.651-.428-1.018-.289-1.775.405-.45.821-.747 1.321-1.101z"
              fill="#9598a6"
            /><path
              d="M14.752 9.468h2.642v.44h.661c.526.789.529 1.385.537 2.298l.027.88c-.123.785-.123.785-.593 1.326-.74.398-1.187.431-2.021.395l-.713-.024-.539-.031v-.44h-.44c-.793-.661-1.07-1.263-1.183-2.284.098-.943.352-1.403.963-2.119h.661v-.44zm-.881 1.321c-.279.874-.326 1.773 0 2.642h.44l.22.661c.567.436.902.44 1.624.427 1-.259 1.453-.512 2.119-1.307.177-.768.173-1.433 0-2.202-.482-.622-.843-.972-1.541-1.321-1.339-.154-1.971.082-2.862 1.101z"
              fill="#acafb9"
            /><path
              d="M9.468 5.284c1.274.759 1.274.759 1.514 1.376l.028.385-.661.22-.44-.22v-.44h-.661v1.541l-1.101-.44c-.083-.592-.083-.592 0-1.321.402-.454.821-.747 1.321-1.101z"
              fill="#9699a7"
            /><path
              d="M9.248 6.605h.661v.44l.44.22h-.661l.661 1.321-.661-.22.22.661v1.761c-.652-.135-.965-.276-1.541-.661l-.22.44.22-.881h1.101L8.367 7.927l.881.22V6.605z"
              fill="#9a9eaa"
            /><path
              d="M14.463 16.874h.729l.758.011.756-.002c1.154.007 2.049.023 3.111.511v.22c-1.266.028-1.266.028-1.761-.22l-.95-.029-.565-.001-.59.003-.593-.003-.564.001-.519.001c-.406-.015-.406-.015-.622.249H12.33c.715-.642 1.18-.743 2.132-.741z"
              fill="#999da9"
            /><path
              d="M20.037 20.037c.495.391.65.569.725 1.207l-.023.596-.018.601-.023.458.881.22c-.399.151-.399.151-.881.22-.358-.241-.358-.241-.661-.661-.065-.642-.065-.642-.041-1.362l.018-.725.023-.555z"
              fill="#9fa2ae"
            /><path
              d="M9.468 8.147l1.321.661v1.761h-.881l-.096-.716c-.088-.587-.185-1.137-.344-1.706z"
              fill="#8f93a0"
            /><path
              d="M9.289 5.794l.399.151-.44.22v1.982l-1.101-.44c-.08-1.197-.08-1.197.275-1.748.385-.234.385-.234.867-.165z"
              fill="#8b8f9d"
            /><path
              d="M9.468 9.248h.44v1.541c-.652-.135-.965-.276-1.541-.661l-.22.44.22-.881h1.101v-.44z"
              fill="#b5b8c1"
            /><path
              d="M9.688 5.945l1.101.44v.881l-.881-.22-.22-1.101z"
              fill="#9093a1"
            /><path
              d="M18.055 13.211h.44c-.088.635-.174.842-.674 1.266l-.427.275-.44-.22 1.101-1.321z"
              fill="#a1a4b0"
            /><path
              d="M10.128 9.248h.661v1.321h-.661V9.248z"
              fill="#828695"
            /><path
              d="M9.248 6.605h.661v.44l.44.22h-.661v.661h-.44V6.605z"
              fill="#c3c5cd"
            /></svg>
          </span>
        </template>
        <template v-else-if="item.icon === 'customLeave'">
          <span class="custom-icon mr-2 ml-n1">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              xmlns:v="https://vecta.io/nano"
            ><path
              d="M7.95.765c.45.195.45.195.93.675v1.44h6.48V1.44c.285-.465.285-.465.72-.72.802.059 1.105.145 1.68.72v1.44l.413.002c1.353.068 2.092.361 3.088 1.278.868 1.027.92 2.05.973 3.356l.028.604-.001 6.763-.043 2.142-.031 1.372-.011.642-.017.596-.012.52c-.182 1.293-.981 1.885-1.988 2.646-.763.254-1.317.275-2.119.282l-.872.009-.943.005-.481.003-2.522.011-2.596.02-2.004.009-1.419.014c-2.068-.005-3.161-.163-4.66-1.644-.607-1.378-.532-2.767-.528-4.252l-.006-.997-.001-2.085-.016-2.66-.006-2.058-.014-1.453c.017-1.673.126-2.776 1.249-4.06.732-.668 1.259-.892 2.224-.976l.588-.054.447-.036-.06-.675c.06-.765.06-.765.48-1.23.54-.255.54-.255 1.05-.21zM4.98 5.76c-.662.756-.484 1.419-.42 2.4.643.322 1.136.269 1.856.267h.874l.947-.004.966-.001 2.545-.006 2.596-.005L19.44 8.4c.302-.605.22-.925.135-1.59l-.074-.594-.061-.456L18 5.52l-.3.825c-.42.855-.42.855-.9 1.11-.48-.015-.48-.015-1.2-.495l-.48-1.44h-6c-.525 1.096-.525 1.096-.48 1.92L6.96 7.2l-.48-1.68c-.912-.065-.912-.065-1.5.24zm-.42 5.04l-.053 3.741-.02 1.272-.021 1.83-.015.574c0 .815.01 1.334.514 1.993.677.524 1.012.551 1.86.554l.791.009.851-.006.877.003 1.835-.005 2.811.006 1.782-.004.851.006.791-.009.695-.002c.796-.159 1.082-.444 1.57-1.082.087-.707.118-1.322.102-2.028l-.002-.591-.014-1.234-.018-1.896-.011-1.199-.005-.576c.065-.87.065-.87-.292-1.596l-1.342-.031-.869-.002-.946.001h-.964a925.55 925.55 0 0 0-2.023.001c-.865.001-1.731.001-2.596-.001a888.43 888.43 0 0 0-1.992 0 690.34 690.34 0 0 1-1.424-.001l-.871.002-.77.001c-.602-.01-.602-.01-1.083.27z"
              fill="#8c909e"
            /><path
              d="M7.935.765C8.4.96 8.4.96 8.88 1.44v1.44h6.48V1.44c.285-.465.285-.465.72-.72.802.059 1.105.145 1.68.72v1.44l.413.002c1.353.068 2.092.361 3.088 1.278.868 1.027.92 2.05.973 3.356l.028.604-.001 6.763-.043 2.142-.031 1.372-.011.642-.017.596-.012.52c-.182 1.293-.981 1.885-1.988 2.646-.763.254-1.317.275-2.119.282l-.872.009-.943.005-.481.003-2.522.011-2.596.02-2.004.009-1.419.014c-1.652-.004-2.745-.07-4.084-1.075v-.72l.48.48 1.2.24v.48h14.64v-.48c1.38-.72 1.38-.72 1.92-.72.212-.909.269-1.748.267-2.68v-.888l-.004-.952-.001-.98-.006-2.57-.005-2.626L21.6 5.52h-.48l-.435-.69c-.574-.821-.777-.993-1.725-1.23l-1.92-.24V1.2h-.96l.015.945-.015.975c-.24.24-.24.24-.95.267l-.941-.004-.499-.001-1.585-.007-1.072-.003L8.4 3.36V1.44H6.72c.586-.732.586-.732 1.215-.675z"
              fill="#8e919f"
            /><path
              d="M6.72 4.8c.491.491.408 1.513.48 2.16l1.2.24V4.8l2.934-.04.998-.015 1.435-.016.872-.011c.721.082.721.082 1.177.391.427.666.307 1.324.263 2.091h.96v-.48h.48l-.015-.585c.015-.615.015-.615.255-.855l1.68.24c-.72.24-.72.24-1.44.24l-.165.69c-.315.75-.315.75-.885 1.125-.63.105-.63.105-1.17-.135-.42-.48-.42-.48-.66-1.92l-6 .24-.48 1.68c-.54.18-.54.18-1.2.24-.555-.39-.555-.39-.96-.96-.06-.66-.06-.66 0-1.2l-.825.24-.464.135c-.622.472-.622.472-.631 2.265l14.88.24V6l.72.24v2.4H4.32c0-2.64 0-2.64.39-3.405.72-.55 1.124-.553 2.01-.435z"
              fill="#b9bbc3"
            /><path
              d="M6.48 1.44h.24v1.92H5.04v.48h-.72l-.195.465C3.84 4.8 3.84 4.8 3.12 5.04c-.266.799-.269 1.392-.267 2.234v.946l.004 1.023.001 1.046.006 2.752.005 2.809.012 5.51c-.567-.433-.71-.651-.816-1.368l-.008-.792-.014-.898-.002-.973-.007-1-.005-2.098-.022-2.677-.009-2.067-.01-.986c-.028-1.822.001-3.148 1.235-4.556.733-.666 1.259-.891 2.224-.975l.588-.054.447-.036V1.44z"
              fill="#b8bac3"
            /><path
              d="M6.72 5.28v1.44h-.24v-1.2l-.825.24-.464.135c-.622.472-.622.472-.631 2.265l14.88.24V6l.72.24v2.4H4.32c0-2.64 0-2.64.525-3.3.766-.341 1.093-.328 1.875-.06z"
              fill="#c6c7ce"
            /><path
              d="M12.39 15.945l.594.074.456.061.015 1.185.008.667c-.023.548-.023.548-.263.788l-1.08.03-.593.002c-.487-.032-.487-.032-.727-.272l-.015-1.215.007-.668.008-.517c.605-.302.925-.22 1.59-.135z"
              fill="#bfc1c9"
            /><path
              d="M15.36 12.24h2.4l.24 2.4c-.875.583-1.371.519-2.4.48-.503-.817-.542-1.451-.48-2.4l.24-.48z"
              fill="#aaadb8"
            /><path
              d="M8.16 15.84l.72.48c.07.519.07.519.045 1.11l-.02.594-.025.456c-.813.186-1.566.33-2.4.24L6 18l.24-.72v-1.2l.69.015c.728.039.728.039 1.23-.255z"
              fill="#9397a4"
            /><path
              d="M2.88 21.36l.72.48 1.2.24v.48l14.64.24v.24l-5.639.05-2.619.023-2.53.019-1.429.018c-1.643 0-2.797-.017-4.102-1.069l-.24-.72z"
              fill="#cecfd6"
            /><path
              d="M7.815 12.69l.586-.002c.479.032.479.032.719.272v1.2c-.535.267-.847.28-1.44.285l-.51.01c-.45-.055-.45-.055-.93-.535v-.96c.571-.286.94-.272 1.575-.27z"
              fill="#b0b2bc"
            /><path
              d="M15.36 16.56h2.4c.15.57.15.57.24 1.2-.48.48-.48.48-.93.544l-.51-.004-.51.004c-.45-.064-.45-.064-.93-.544.09-.63.09-.63.24-1.2z"
              fill="#c3c5cc"
            /><path
              d="M11.536 12.696l.599.008.601.007.464.008.48.96-.48.72c-.45.079-.45.079-.96.06l-.51-.011c-.45-.049-.45-.049-.93-.289v-1.2c.24-.24.24-.24.736-.263z"
              fill="#babcc4"
            /><path
              d="M20.16 21.84l.48.24-.48.72c-.614.087-.614.087-1.398.082h-.888l-.963-.011-.983-.003-2.587-.018-2.64-.014L5.52 22.8v-.24h13.92v-.48l.72-.24z"
              fill="#a6a9b4"
            /><path
              d="M6.48 1.44h.24v1.92H5.04v.48h-.72l-.195.465C3.84 4.8 3.84 4.8 3.12 5.04l-.24.72c-.24-.48-.24-.48-.09-1.05.418-.798.753-1.127 1.53-1.59.719-.145 1.428-.208 2.16-.24V1.44z"
              fill="#b4b7c0"
            /><path
              d="M8.16 15.84l.72.48c.07.519.07.519.045 1.11l-.02.594-.025.456-1.2.24.72-.24v-2.16l-.57.135c-.63.105-.63.105-1.11-.135v2.16l.72.24-1.2-.24v-2.4l.69.015c.728.039.728.039 1.23-.255z"
              fill="#c9cbd2"
            /><path
              d="M11.28 16.32l1.44.24.24 1.68h-1.68v-1.92z"
              fill="#9497a5"
            /><path
              d="M15.6 16.8h1.92v.96H15.6v-.96z"
              fill="#8f92a0"
            /><path
              d="M7.44.72c.513.06.83.11 1.2.48l.135 1.095.061.601.044.464H8.4V1.44H6.72c.3-.375.3-.375.72-.72z"
              fill="#b8bac3"
            /><path
              d="M18.96 3.36c1.532.145 1.532.145 2.145.54.34.56.307.977.255 1.62l-.39-.555c-.618-.7-1.16-.998-2.01-1.365v-.24z"
              fill="#abaeb9"
            /><path
              d="M2.88 21.36l.72.48 1.2.24v.48l.72.24c-.925.086-1.339.066-2.13-.45l-.51-.51v-.48z"
              fill="#bec0c8"
            /><path
              d="M11.28 13.2h1.68l-.24.72h-1.44v-.72z"
              fill="#888c9b"
            /><path
              d="M11.76 16.8h.96l-.24 1.2-.72-.24v-.96z"
              fill="#838797"
            /></svg>
          </span>
        </template>
        <template v-else>
          <VIcon
            size="20"
            start
            :icon="item.icon"
          />
        </template>
        {{ item.title }}
      </VTab>
    </VTabs>

    <VWindow
      v-model="activeTab"
      class="mt-5 disable-tab-transition"
    >
      <VWindowItem value="EmployeeInfo">
        <EmployeeInfo />
      </VWindowItem>

      <VWindowItem value="Pay">
        <PayInfo />
      </VWindowItem>

      <VWindowItem value="Leave">
        <LeaveInfo />
      </VWindowItem>
    </VWindow>
  </div>
</template>

<style lang="scss">
.custom-active-tab {
  background-color: #007bff !important; /* Set your desired background color */
  color: #fff !important; /* Set your desired text color */
}
</style>
